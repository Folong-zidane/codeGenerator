sequenceDiagram
    participant Client
    participant PostController
    participant PostService
    participant PostRepository
    participant UserService
    participant Database
    
    Client->>PostController: POST /api/posts
    PostController->>PostService: createPost(postData)
    PostService->>UserService: validateUser(userId)
    UserService-->>PostService: User valid
    PostService->>PostService: validateContent(content)
    alt Content valid
        PostService->>PostRepository: save(post)
        PostRepository->>Database: INSERT INTO posts
        Database-->>PostRepository: Post created
        PostRepository-->>PostService: Post entity
        PostService-->>PostController: Success
        PostController-->>Client: 201 Created
    else Content invalid
        PostService-->>PostController: ValidationException
        PostController-->>Client: 400 Bad Request
    end
