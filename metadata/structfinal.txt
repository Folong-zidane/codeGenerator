# ğŸ¯ MÃ‰TADONNÃ‰ES UML COMPLÃˆTES - BASÃ‰ES SUR LES STANDARDS RÃ‰ELS

## ğŸ“‹ 1. FORMAT DU DIAGRAMME (DÃ©tection Automatique)

```yaml
%% @diagram-format
%% format: mermaid|plantuml|xmi|visual-paradigm
%% version: 10.0|2.5.1
%% auto-detect: true
%% @end-diagram-format
```

---

## ğŸ—ï¸ 2. ARCHITECTURE MODULAIRE (BASÃ‰E SUR LES FRAMEWORKS)

```yaml
%% ============================================
%% ARCHITECTURE & MODULES
%% ============================================
%% @project-architecture
%% 
%% ===== STRATÃ‰GIE GLOBALE =====
%% organization-strategy: package-by-feature|package-by-layer|hybrid|domain-driven
%% base-package: com.example.blog
%% 
%% ===== MODULE DISCOVERY (AUTO) =====
%% module-detection: auto|manual
%% module-strategy: aggregate-root|feature-bounded-context|class-hierarchy|dependency-graph
%% 
%% --- StratÃ©gies de dÃ©tection automatique ---
%% aggregate-root: true              # Classe racine d'agrÃ©gat DDD
%% class-hierarchy: true             # Classe parent + enfants = 1 module
%% feature-boundary: true            # Bounded context (User, Order, Payment)
%% shared-module-name: common|core|shared
%% 
%% ===== JAVA/SPRING BOOT =====
%% spring-structure: feature|layer|hybrid
%% 
%% --- Si package-by-feature (RECOMMANDÃ‰) ---
%% feature-packages: auto-detect|manual
%% per-feature-structure: controller,service,repository,entity,dto,mapper,exception,config
%% feature-visibility: package-private     # Classes non publiques par dÃ©faut
%% 
%% --- Si package-by-layer (LEGACY) ---
%% layer-packages: controller,service,repository,entity,dto,mapper,config,exception
%% 
%% ===== PYTHON/DJANGO =====
%% django-apps: auto-detect|manual
%% app-detection-strategy: aggregate-root|feature-bounded-context
%% per-app-structure: models,views,serializers,services,urls,admin,tests,migrations
%% shared-app-name: common|core
%% 
%% ===== C#/.NET =====
%% dotnet-solution-structure: vertical-slices|clean-architecture|layered
%% projects: Api,Application,Domain,Infrastructure,Tests
%% 
%% ===== TYPESCRIPT/NEST.JS =====
%% nestjs-structure: modules
%% module-detection: feature-bounded-context
%% per-module-structure: controller,service,dto,entity
%% 
%% ===== PHP/LARAVEL =====
%% laravel-structure: modular
%% module-detection: feature-bounded-context
%% per-module-structure: Controllers,Models,Services,Resources,Requests
%% 
%% @end-project-architecture
```

### **Exemple de DÃ©tection Automatique de Modules**

```
Diagramme UML avec:
- User (classe parent)
  â”œâ”€ Author (hÃ©rite)
  â””â”€ Admin (hÃ©rite)
- Article (Aggregate Root DDD)
  â”œâ”€ BlocContenu (Composition - lifecycle dÃ©pendant)
- Tag (EntitÃ© indÃ©pendante)
- Commentaire (Relation avec User + Article)

Modules Auto-DÃ©tectÃ©s:
1. user/ (User + Author + Admin car hiÃ©rarchie)
2. article/ (Article + BlocContenu car composition forte)
3. tag/ (Tag indÃ©pendant)
4. comment/ (Commentaire car relation multiple)
```

---

## ğŸ”— 3. RELATIONS UML (BASÃ‰ES SUR NOTATIONS STANDARDS)

```yaml
%% ============================================
%% RELATIONS UML â†’ CODE
%% ============================================
%% @class-relationships
%% 
%% ===== NOTATION STANDARD DÃ‰TECTÃ‰E =====
%% --- Mermaid ---
%% inheritance-notation: <|--              # HÃ©ritage
%% composition-notation: *--               # Composition (losange plein)
%% aggregation-notation: o--               # AgrÃ©gation (losange vide)
%% association-notation: --                # Association simple
%% dependency-notation: ..>                # DÃ©pendance
%% realization-notation: ..|>              # RÃ©alisation
%% 
%% --- PlantUML ---
%% inheritance-notation: <|--
%% composition-notation: *--
%% aggregation-notation: o--
%% association-notation: --
%% dependency-notation: ..>
%% realization-notation: <|..
%% 
%% ============================================
%% HÃ‰RITAGE (Notation: A <|-- B)
%% ============================================
%% inheritance-enabled: true
%% multiple-inheritance: false
%% abstract-classes: true
%% interfaces: true
%% 
%% --- JPA/Hibernate (Java) ---
%% jpa-inheritance-strategy: JOINED|SINGLE_TABLE|TABLE_PER_CLASS
%% discriminator-column: dtype
%% discriminator-type: STRING
%% 
%% --- Django ORM (Python) ---
%% django-inheritance: multi-table|abstract|proxy
%% 
%% --- Entity Framework (C#) ---
%% ef-inheritance: table-per-hierarchy|table-per-type|table-per-concrete
%% 
%% --- GÃ©nÃ©ration de code ---
%% generate-abstract-methods: true
%% override-annotations: true
%% 
%% ============================================
%% COMPOSITION (Notation: Article *-- "1..*" BlocContenu)
%% ============================================
%% composition-enabled: true
%% composition-semantics: strong-ownership
%% lifecycle-dependency: dependent          # Enfant dÃ©truit avec parent
%% 
%% --- Parsing de la multiplicitÃ© ---
%% multiplicity-parsing: auto
%% multiplicity-source: 1|0..1|1..*
%% multiplicity-target: 1|0..*|1..*|5..10
%% 
%% --- Mapping ORM ---
%% cascade-operations: ALL|PERSIST,MERGE,REMOVE
%% orphan-removal: true                     # Si parent supprimÃ© â†’ enfant supprimÃ©
%% fetch-strategy: LAZY|EAGER
%% nullable: false                          # Enfant ne peut exister sans parent
%% 
%% --- GÃ©nÃ©ration de code ---
%% generate-add-remove-methods: true        # addBloc(), removeBloc()
%% generate-bidirectional-sync: true        # Synchronisation automatique
%% field-initialization: constructor|setter
%% 
%% ============================================
%% AGRÃ‰GATION (Notation: Article o-- "0..*" Tag)
%% ============================================
%% aggregation-enabled: true
%% aggregation-semantics: weak-ownership
%% lifecycle-dependency: independent        # Tag existe sans Article
%% 
%% --- Mapping ORM ---
%% cascade-operations: PERSIST,MERGE       # PAS de REMOVE !
%% orphan-removal: false                    # Tag reste si Article supprimÃ©
%% fetch-strategy: LAZY
%% nullable: true                           # Peut Ãªtre null
%% 
%% --- Many-to-Many Join Table ---
%% join-table-generation: auto
%% join-table-name: {source}_{target}      # article_tags
%% 
%% --- GÃ©nÃ©ration de code ---
%% collection-type: Set|List
%% generate-add-remove-methods: true
%% 
%% ============================================
%% ASSOCIATION (Notation: Article "1" -- "0..*" Commentaire)
%% ============================================
%% association-enabled: true
%% bidirectional-support: true
%% 
%% --- Parsing de la direction ---
%% direction: unidirectional|bidirectional
%% owner-side: source|target|auto           # Qui possÃ¨de la FK ?
%% 
%% --- Bidirectionnelle ---
%% inverse-mapping: mappedBy                # JPA
%% related-name: auto                       # Django
%% navigation-property: auto                # C#
%% 
%% --- MultiplicitÃ©s dÃ©tectÃ©es ---
%% one-to-one: 1 -- 1
%% one-to-many: 1 -- 0..*
%% many-to-one: 0..* -- 1
%% many-to-many: 0..* -- 0..*
%% 
%% ============================================
%% DÃ‰PENDANCE (Notation: ArticleService ..> EmailService)
%% ============================================
%% dependency-enabled: true
%% dependency-type: use|instantiate
%% 
%% --- Injection de dÃ©pendances ---
%% di-enabled: true
%% di-type: constructor|setter|field
%% di-framework: spring|cdi|guice|autofac
%% 
%% @end-class-relationships
```

---

## ğŸ”„ 4. DIAGRAMME DE SÃ‰QUENCE (BASÃ‰ SUR STANDARD UML 2.x)

```yaml
%% ============================================
%% DIAGRAMME DE SÃ‰QUENCE
%% ============================================
%% @sequence-diagram
%% diagram-type: sequence
%% 
%% ===== FRAGMENTS COMBINÃ‰S (UML 2.x) =====
%% combined-fragments: true
%% 
%% --- Types de fragments dÃ©tectÃ©s ---
%% alt-fragment: true                # Alternative (if/else)
%% opt-fragment: true                # Optionnel (if)
%% loop-fragment: true               # Boucle
%% par-fragment: true                # ParallÃ¨le
%% break-fragment: true              # Interruption
%% critical-fragment: false          # Section critique
%% 
%% --- Parsing des conditions ---
%% guard-condition-syntax: [condition]|{condition}
%% guard-language: natural|java|python|typescript
%% 
%% --- GÃ©nÃ©ration de code pour alt/opt ---
%% generate-if-else: true
%% generate-try-catch: true
%% exception-handling: checked|unchecked
%% 
%% --- GÃ©nÃ©ration de code pour loop ---
%% loop-type: while|for|foreach
%% loop-bounds: auto-detect          # loop(1,10)
%% generate-loop-code: true
%% 
%% --- GÃ©nÃ©ration de code pour par ---
%% async-framework: completable-future|async-await|goroutines|promises
%% thread-pool: true
%% 
%% ===== MESSAGES =====
%% synchronous-call: solid-arrow     # â†’
%% asynchronous-call: open-arrow     # ->>
%% return-message: dashed-arrow      # -->>
%% self-call: true
%% 
%% ===== TRANSACTIONS =====
%% transaction-support: true
%% transaction-scope: method|class
%% transaction-annotation: @Transactional|@transactional
%% 
%% ===== ERROR HANDLING =====
%% error-handling: try-catch|result-pattern|either
%% retry-policy: exponential-backoff|fixed-delay
%% circuit-breaker: resilience4j|hystrix|polly
%% 
%% ===== LOGGING & MONITORING =====
%% log-method-calls: true
%% log-parameters: true
%% distributed-tracing: zipkin|jaeger|opentelemetry
%% 
%% @end-sequence-diagram
```

---

## ğŸ“Š 5. DIAGRAMME D'Ã‰TAT (STATE MACHINE)

```yaml
%% ============================================
%% DIAGRAMME D'Ã‰TAT
%% ============================================
%% @state-diagram
%% diagram-type: state
%% 
%% ===== TYPE DE MACHINE =====
%% state-machine-type: finite|hierarchical|concurrent
%% state-machine-framework: spring-statemachine|stateless|xstate
%% 
%% ===== Ã‰TATS HIÃ‰RARCHIQUES =====
%% hierarchical-states: true
%% sub-states: true
%% history-states: shallow|deep
%% 
%% ===== ACTIONS =====
%% entry-actions: true              # entry / action
%% exit-actions: true               # exit / action
%% do-actions: true                 # do / activity
%% transition-actions: true
%% 
%% ===== Ã‰VÃ‰NEMENTS =====
%% event-driven: true
%% event-sourcing: true
%% event-store: kafka|eventstore|postgres
%% 
%% ===== TRANSITIONS =====
%% guard-conditions: true           # [guard] / action
%% automatic-transitions: true
%% 
%% ===== PERSISTENCE =====
%% state-persistence: database|redis|memory
%% audit-trail: true
%% 
%% @end-state-diagram
```

---

## ğŸ”— 6. RELATIONS INTER-DIAGRAMMES

```yaml
%% ============================================
%% TRAÃ‡ABILITÃ‰ INTER-DIAGRAMMES
%% ============================================
%% @diagram-relationships
%% 
%% ===== CAS D'UTILISATION â†’ CLASSES =====
%% usecase-to-class-mapping: true
%% usecase-generates: controller,service,dto
%% 
%% Exemple:
%% UseCase "CrÃ©er Article" â†’ 
%%   - ArticleController.createArticle()
%%   - ArticleService.createArticle()
%%   - Article (entity)
%% 
%% ===== SÃ‰QUENCE â†’ MÃ‰THODES =====
%% sequence-to-method-mapping: true
%% sequence-generates: method-signatures
%% 
%% Exemple:
%% SÃ©quence: Client â†’ ArticleService: createArticle(title)
%% GÃ©nÃ¨re: public Article createArticle(String title)
%% 
%% ===== CLASSES â†’ Ã‰TATS =====
%% class-to-state-mapping: true
%% state-field-name: status|state|statut
%% 
%% Exemple:
%% Article (classe) â†’ ArticleStateMachine
%% Article.status â†’ DRAFT|PUBLISHED|ARCHIVED
%% 
%% ===== COMPOSANTS â†’ CLASSES =====
%% component-to-class-mapping: true
%% component-groups-classes: true
%% 
%% Exemple:
%% Component "UserService" contient:
%%   - User, Author, Admin (entities)
%%   - UserController, UserService, UserRepository
%% 
%% @end-diagram-relationships
```

---

## ğŸ“‹ 7. EXEMPLE COMPLET - DIAGRAMME DE CLASSES AVEC MÃ‰TADONNÃ‰ES

```mermaid
%% ============================================
%% MÃ‰TADONNÃ‰ES PROJET
%% ============================================
%% @project
%% name: blog-cms-platform
%% version: 1.0.0
%% @end-project

%% @tech-stack
%% backend-language: java
%% backend-framework: spring-boot
%% backend-version: 3.2.0
%% database-type: postgresql
%% orm-framework: jpa
%% @end-tech-stack

%% ============================================
%% ARCHITECTURE MODULAIRE
%% ============================================
%% @project-architecture
%% organization-strategy: package-by-feature
%% base-package: com.example.blog
%% module-detection: auto
%% module-strategy: class-hierarchy,aggregate-root
%% spring-structure: feature
%% per-feature-structure: controller,service,repository,entity,dto,mapper
%% shared-module-name: common
%% @end-project-architecture

%% ============================================
%% DIAGRAMME & RELATIONS
%% ============================================
%% @diagram-format
%% format: mermaid
%% @end-diagram-format

%% @class-diagram
%% persistence-layer: jpa
%% id-generation-strategy: uuid
%% audit-fields: true
%% soft-delete: true
%% @end-class-diagram

%% @class-relationships
%% inheritance-notation: <|--
%% composition-notation: *--
%% aggregation-notation: o--
%% association-notation: --
%% jpa-inheritance-strategy: JOINED
%% composition-cascade: ALL
%% composition-orphan-removal: true
%% aggregation-cascade: PERSIST,MERGE
%% aggregation-orphan-removal: false
%% bidirectional-support: true
%% owner-side: auto
%% generate-add-remove-methods: true
%% @end-class-relationships

%% ============================================
%% DIAGRAMME UML
%% ============================================
classDiagram
    %% MODULE USER (dÃ©tectÃ© par hiÃ©rarchie)
    class User {
        <<Entity>>
        +UUID id
        +String username
        +String email
        +LocalDateTime createdAt
        +LocalDateTime updatedAt
    }
    
    class Author {
        <<Entity>>
        +String bio
        +String website
    }
    
    class Admin {
        <<Entity>>
        +String permissions
    }
    
    %% HÃ‰RITAGE (JOINED strategy)
    User <|-- Author
    User <|-- Admin
    
    %% MODULE ARTICLE (dÃ©tectÃ© par aggregate root + composition)
    class Article {
        <<AggregateRoot>>
        +UUID id
        +String titre
        +String contenu
        +LocalDateTime createdAt
    }
    
    class BlocContenu {
        <<Entity>>
        +UUID id
        +String contenu
        +Integer ordre
    }
    
    %% COMPOSITION (lifecycle dÃ©pendant)
    %% GÃ©nÃ¨re: cascade=ALL, orphanRemoval=true
    Article *-- "0..*" BlocContenu : contient
    
    %% MODULE TAG (entitÃ© indÃ©pendante)
    class Tag {
        <<Entity>>
        +UUID id
        +String nom
    }
    
    %% AGRÃ‰GATION (lifecycle indÃ©pendant)
    %% GÃ©nÃ¨re: cascade=PERSIST,MERGE, orphanRemoval=false
    Article o-- "0..*" Tag : utilise
    
    %% MODULE COMMENT (relations multiples)
    class Commentaire {
        <<Entity>>
        +UUID id
        +String texte
        +LocalDateTime date
    }
    
    %% ASSOCIATIONS BIDIRECTIONNELLES
    Article "1" -- "0..*" Commentaire : a des commentaires
    User "1" -- "0..*" Commentaire : Ã©crit
    
    %% DÃ‰PENDANCE (injection)
    class ArticleService {
        <<Service>>
        +createArticle()
        +publishArticle()
    }
    
    class EmailService {
        <<Service>>
        +sendNotification()
    }
    
    ArticleService ..> EmailService : uses
```

---

## ğŸ“‚ 8. STRUCTURE GÃ‰NÃ‰RÃ‰E AUTOMATIQUEMENT

### **Java/Spring Boot (Package-by-Feature)**

```
com.example.blog/
â”œâ”€â”€ BlogApplication.java
â”œâ”€â”€ common/
â”‚   â”œâ”€â”€ exception/
â”‚   â”œâ”€â”€ util/
â”‚   â””â”€â”€ config/
â”œâ”€â”€ user/                           # Module AUTO-DÃ‰TECTÃ‰ (hiÃ©rarchie)
â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”œâ”€â”€ User.java              # @Entity, @Inheritance(JOINED)
â”‚   â”‚   â”œâ”€â”€ Author.java            # extends User
â”‚   â”‚   â””â”€â”€ Admin.java             # extends User
â”‚   â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ mapper/
â”‚   â”œâ”€â”€ repository/
â”‚   â”œâ”€â”€ service/
â”‚   â””â”€â”€ controller/
â”œâ”€â”€ article/                        # Module AUTO-DÃ‰TECTÃ‰ (aggregate root)
â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”œâ”€â”€ Article.java           # @Entity, aggregate root
â”‚   â”‚   â””â”€â”€ BlocContenu.java       # cascade=ALL, orphanRemoval=true
â”‚   â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ repository/
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ ArticleService.java
â”‚   â”‚   â””â”€â”€ EmailService.java
â”‚   â””â”€â”€ controller/
â”œâ”€â”€ tag/                            # Module AUTO-DÃ‰TECTÃ‰ (indÃ©pendant)
â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â””â”€â”€ Tag.java
â”‚   â”œâ”€â”€ repository/
â”‚   â”œâ”€â”€ service/
â”‚   â””â”€â”€ controller/
â””â”€â”€ comment/                        # Module AUTO-DÃ‰TECTÃ‰ (relations)
    â”œâ”€â”€ entity/
    â”‚   â””â”€â”€ Commentaire.java
    â”œâ”€â”€ repository/
    â”œâ”€â”€ service/
    â””â”€â”€ controller/
```

### **Django (Apps Auto-DÃ©tectÃ©es)**

```
blog_project/
â”œâ”€â”€ manage.py
â”œâ”€â”€ blog_project/
â”‚   â”œâ”€â”€ settings.py
â”‚   â””â”€â”€ urls.py
â”œâ”€â”€ common/
â”‚   â””â”€â”€ utils.py
â”œâ”€â”€ users/                          # App AUTO-DÃ‰TECTÃ‰E
â”‚   â”œâ”€â”€ models.py                   # User, Author, Admin
â”‚   â”œâ”€â”€ views.py
â”‚   â”œâ”€â”€ serializers.py
â”‚   â””â”€â”€ migrations/
â”œâ”€â”€ articles/                       # App AUTO-DÃ‰TECTÃ‰E
â”‚   â”œâ”€â”€ models.py                   # Article, BlocContenu
â”‚   â”œâ”€â”€ views.py
â”‚   â””â”€â”€ migrations/
â”œâ”€â”€ tags/                           # App AUTO-DÃ‰TECTÃ‰E
â”‚   â””â”€â”€ models.py                   # Tag
â””â”€â”€ comments/                       # App AUTO-DÃ‰TECTÃ‰E
    â””â”€â”€ models.py                   # Commentaire
```

---

## âœ… DIFFÃ‰RENCES CLÃ‰S VS MÃ‰TADONNÃ‰ES PRÃ‰CÃ‰DENTES

### **1. BasÃ© sur Standards UML RÃ©els**
- âœ… Notations Mermaid/PlantUML natives (`*--`, `o--`, `<|--`)
- âœ… Parsing automatique des multiplicitÃ©s (`1`, `0..*`, `1..*`)
- âŒ Avant: mÃ©tadonnÃ©es inventÃ©es non alignÃ©es

### **2. Modules Auto-DÃ©tectÃ©s (Non Arbitraires)**
- âœ… StratÃ©gies: hiÃ©rarchie de classes, aggregate root DDD, bounded context
- âœ… BasÃ© sur recherches Django/Spring Boot
- âŒ Avant: modules dÃ©finis manuellement

### **3. Relations â†’ Code MatÃ©rialisÃ©es**
- âœ… Composition â†’ `cascade=ALL + orphanRemoval=true`
- âœ… AgrÃ©gation â†’ `cascade=PERSIST,MERGE` (PAS de REMOVE)
- âœ… Association â†’ `mappedBy` / `related_name`
- âŒ Avant: pas de lien clair avec le code gÃ©nÃ©rÃ©

### **4. Relations Inter-Diagrammes**
- âœ… UseCase â†’ Controller/Service
- âœ… Sequence â†’ Signatures de mÃ©thodes
- âœ… Class â†’ State Machine
- âŒ Avant: diagrammes isolÃ©s

---

## ğŸ¯ PROCHAINES Ã‰TAPES

Voulez-vous que je :
1. GÃ©nÃ¨re le **parser complet** en Python/TypeScript ?
2. CrÃ©e un **exemple de code gÃ©nÃ©rÃ©** (Java/Django) Ã  partir de ces mÃ©tadonnÃ©es ?
3. DÃ©veloppe les **mÃ©tadonnÃ©es pour les autres diagrammes** (activitÃ©, composants) ?