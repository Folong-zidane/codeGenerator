{"files":{"Services/ProductService.java":"<?php\n\nnamespace App\\ECommerce\\Services;\n\nuse App\\ECommerce\\Models\\Product;\nuse App\\ECommerce\\Repositories\\ProductRepositoryInterface;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Pagination\\LengthAwarePaginator;\nuse Illuminate\\Validation\\ValidationException;\nuse Illuminate\\Support\\Facades\\Validator;\nuse Illuminate\\Support\\Facades\\Log;\n\nuse App\\ECommerce\\Enums\\ProductStatus;\n\nclass ProductService\n{\n    protected ProductRepositoryInterface $repository;\n\n    public function __construct(ProductRepositoryInterface $repository)\n    {\n        $this->repository = $repository;\n    }\n\n    public function getAll(): Collection\n    {\n        return $this->repository->getAll();\n    }\n\n    public function getPaginated(int $perPage = 15): LengthAwarePaginator\n    {\n        return $this->repository->getPaginated($perPage);\n    }\n\n    public function findById(int $id): ?Product\n    {\n        return $this->repository->findById($id);\n    }\n\n    public function create(array $data): Product\n    {\n        $this->validateData($data);\n        \n        try {\n            return $this->repository->create($data);\n        } catch (\\Exception $e) {\n            Log::error('Service error creating Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function update(int $id, array $data): ?Product\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Product not found with id: ' . $id);\n        }\n        \n        $this->validateData($data, $id);\n        \n        try {\n            return $this->repository->update($id, $data);\n        } catch (\\Exception $e) {\n            Log::error('Service error updating Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function delete(int $id): bool\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Product not found with id: ' . $id);\n        }\n        \n        try {\n            return $this->repository->delete($id);\n        } catch (\\Exception $e) {\n            Log::error('Service error deleting Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function suspendProduct(int $id): ?Product\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Product not found with id: ' . $id);\n        }\n        \n        try {\n            $entity->suspend();\n            return $entity;\n        } catch (\\Exception $e) {\n            Log::error('Service error suspending Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function activateProduct(int $id): ?Product\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Product not found with id: ' . $id);\n        }\n        \n        try {\n            $entity->activate();\n            return $entity;\n        } catch (\\Exception $e) {\n            Log::error('Service error activating Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    protected function validateData(array $data, ?int $id = null): void\n    {\n        $rules = [\n            // Add validation rules here\n            // 'name' => 'required|string|max:255',\n            // 'email' => 'required|email|unique:products,email' . ($id ? ',' . $id : ''),\n        ];\n        \n        $validator = Validator::make($data, $rules);\n        \n        if ($validator->fails()) {\n            throw new ValidationException($validator);\n        }\n    }\n}\n","Services/OrderService.java":"<?php\n\nnamespace App\\ECommerce\\Services;\n\nuse App\\ECommerce\\Models\\Order;\nuse App\\ECommerce\\Repositories\\OrderRepositoryInterface;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Pagination\\LengthAwarePaginator;\nuse Illuminate\\Validation\\ValidationException;\nuse Illuminate\\Support\\Facades\\Validator;\nuse Illuminate\\Support\\Facades\\Log;\n\nuse App\\ECommerce\\Enums\\OrderStatus;\n\nclass OrderService\n{\n    protected OrderRepositoryInterface $repository;\n\n    public function __construct(OrderRepositoryInterface $repository)\n    {\n        $this->repository = $repository;\n    }\n\n    public function getAll(): Collection\n    {\n        return $this->repository->getAll();\n    }\n\n    public function getPaginated(int $perPage = 15): LengthAwarePaginator\n    {\n        return $this->repository->getPaginated($perPage);\n    }\n\n    public function findById(int $id): ?Order\n    {\n        return $this->repository->findById($id);\n    }\n\n    public function create(array $data): Order\n    {\n        $this->validateData($data);\n        \n        try {\n            return $this->repository->create($data);\n        } catch (\\Exception $e) {\n            Log::error('Service error creating Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function update(int $id, array $data): ?Order\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Order not found with id: ' . $id);\n        }\n        \n        $this->validateData($data, $id);\n        \n        try {\n            return $this->repository->update($id, $data);\n        } catch (\\Exception $e) {\n            Log::error('Service error updating Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function delete(int $id): bool\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Order not found with id: ' . $id);\n        }\n        \n        try {\n            return $this->repository->delete($id);\n        } catch (\\Exception $e) {\n            Log::error('Service error deleting Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function suspendOrder(int $id): ?Order\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Order not found with id: ' . $id);\n        }\n        \n        try {\n            $entity->suspend();\n            return $entity;\n        } catch (\\Exception $e) {\n            Log::error('Service error suspending Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function activateOrder(int $id): ?Order\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Order not found with id: ' . $id);\n        }\n        \n        try {\n            $entity->activate();\n            return $entity;\n        } catch (\\Exception $e) {\n            Log::error('Service error activating Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    protected function validateData(array $data, ?int $id = null): void\n    {\n        $rules = [\n            // Add validation rules here\n            // 'name' => 'required|string|max:255',\n            // 'email' => 'required|email|unique:orders,email' . ($id ? ',' . $id : ''),\n        ];\n        \n        $validator = Validator::make($data, $rules);\n        \n        if ($validator->fails()) {\n            throw new ValidationException($validator);\n        }\n    }\n}\n","Http/Controllers/Api/ProductController.java":"<?php\n\nnamespace App\\ECommerce\\Http\\Controllers\\Api;\n\nuse App\\ECommerce\\Http\\Controllers\\Controller;\nuse App\\ECommerce\\Models\\Product;\nuse App\\ECommerce\\Services\\ProductService;\nuse App\\ECommerce\\Http\\Resources\\ProductResource;\nuse App\\ECommerce\\Http\\Requests\\StoreProductRequest;\nuse App\\ECommerce\\Http\\Requests\\UpdateProductRequest;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\Resources\\Json\\AnonymousResourceCollection;\nuse Illuminate\\Support\\Facades\\Log;\n\nclass ProductController extends Controller\n{\n    protected ProductService $service;\n\n    public function __construct(ProductService $service)\n    {\n        $this->service = $service;\n    }\n\n    /**\n     * Display a listing of the resource.\n     */\n    public function index(Request $request): AnonymousResourceCollection\n    {\n        try {\n            $perPage = $request->get('per_page', 15);\n            $entities = $this->service->getPaginated($perPage);\n            \n            return ProductResource::collection($entities);\n        } catch (\\Exception $e) {\n            Log::error('Error fetching products: ' . $e->getMessage());\n            return response()->json(['error' => 'Internal server error'], 500);\n        }\n    }\n\n    /**\n     * Display the specified resource.\n     */\n    public function show(int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->findById($id);\n            \n            if (!$entity) {\n                return response()->json(['error' => 'Product not found'], 404);\n            }\n            \n            return response()->json(new ProductResource($entity));\n        } catch (\\Exception $e) {\n            Log::error('Error fetching product: ' . $e->getMessage());\n            return response()->json(['error' => 'Internal server error'], 500);\n        }\n    }\n\n    /**\n     * Store a newly created resource in storage.\n     */\n    public function store(StoreProductRequest $request): JsonResponse\n    {\n        try {\n            $entity = $this->service->create($request->validated());\n            \n            return response()->json(new ProductResource($entity), 201);\n        } catch (\\Exception $e) {\n            Log::error('Error creating product: ' . $e->getMessage());\n            return response()->json(['error' => 'Bad request', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n    /**\n     * Update the specified resource in storage.\n     */\n    public function update(UpdateProductRequest $request, int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->update($id, $request->validated());\n            \n            if (!$entity) {\n                return response()->json(['error' => 'Product not found'], 404);\n            }\n            \n            return response()->json(new ProductResource($entity));\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error updating product: ' . $e->getMessage());\n            return response()->json(['error' => 'Bad request', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n    /**\n     * Remove the specified resource from storage.\n     */\n    public function destroy(int $id): JsonResponse\n    {\n        try {\n            $deleted = $this->service->delete($id);\n            \n            if (!$deleted) {\n                return response()->json(['error' => 'Product not found'], 404);\n            }\n            \n            return response()->json(null, 204);\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error deleting product: ' . $e->getMessage());\n            return response()->json(['error' => 'Internal server error'], 500);\n        }\n    }\n\n    /**\n     * Suspend the specified product.\n     */\n    public function suspend(int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->suspendProduct($id);\n            \n            return response()->json(new ProductResource($entity));\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error suspending product: ' . $e->getMessage());\n            return response()->json(['error' => 'Invalid state transition', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n    /**\n     * Activate the specified product.\n     */\n    public function activate(int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->activateProduct($id);\n            \n            return response()->json(new ProductResource($entity));\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error activating product: ' . $e->getMessage());\n            return response()->json(['error' => 'Invalid state transition', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n}\n","Repositories/ProductRepository.java":"<?php\n\nnamespace App\\ECommerce\\Repositories;\n\nuse App\\ECommerce\\Models\\Product;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Pagination\\LengthAwarePaginator;\n\ninterface ProductRepositoryInterface\n{\n    public function getAll(): Collection;\n    public function getPaginated(int $perPage = 15): LengthAwarePaginator;\n    public function findById(int $id): ?Product;\n    public function create(array $data): Product;\n    public function update(int $id, array $data): ?Product;\n    public function delete(int $id): bool;\n    public function exists(int $id): bool;\n}\n\n\n<?php\n\nnamespace App\\ECommerce\\Repositories;\n\nuse App\\ECommerce\\Models\\Product;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Pagination\\LengthAwarePaginator;\nuse Illuminate\\Support\\Facades\\Log;\n\nclass ProductRepository implements ProductRepositoryInterface\n{\n    protected Product $model;\n\n    public function __construct(Product $model)\n    {\n        $this->model = $model;\n    }\n\n    public function getAll(): Collection\n    {\n        return $this->model->all();\n    }\n\n    public function getPaginated(int $perPage = 15): LengthAwarePaginator\n    {\n        return $this->model->paginate($perPage);\n    }\n\n    public function findById(int $id): ?Product\n    {\n        return $this->model->find($id);\n    }\n\n    public function create(array $data): Product\n    {\n        try {\n            return $this->model->create($data);\n        } catch (\\Exception $e) {\n            Log::error('Error creating Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function update(int $id, array $data): ?Product\n    {\n        try {\n            $entity = $this->findById($id);\n            if ($entity) {\n                $entity->update($data);\n                return $entity->fresh();\n            }\n            return null;\n        } catch (\\Exception $e) {\n            Log::error('Error updating Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function delete(int $id): bool\n    {\n        try {\n            $entity = $this->findById($id);\n            if ($entity) {\n                return $entity->delete();\n            }\n            return false;\n        } catch (\\Exception $e) {\n            Log::error('Error deleting Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function exists(int $id): bool\n    {\n        return $this->model->where('id', $id)->exists();\n    }\n}\n","enums/ProductStatus.php":"<?php\n\nnamespace App\\ECommerce\\Enums;\n\nenum ProductStatus: string\n{\n    case DELIVERED = 'DELIVERED';\n    case CONFIRMED = 'CONFIRMED';\n    case INITIAL = 'INITIAL';\n    case PENDING = 'PENDING';\n    case SHIPPED = 'SHIPPED';\n\n    public function label(): string\n    {\n        return match($this) {\n            self::DELIVERED => 'Delivered',\n            self::CONFIRMED => 'Confirmed',\n            self::INITIAL => 'Initial',\n            self::PENDING => 'Pending',\n            self::SHIPPED => 'Shipped',\n        };\n    }\n}\n","Http/Controllers/Api/OrderController.java":"<?php\n\nnamespace App\\ECommerce\\Http\\Controllers\\Api;\n\nuse App\\ECommerce\\Http\\Controllers\\Controller;\nuse App\\ECommerce\\Models\\Order;\nuse App\\ECommerce\\Services\\OrderService;\nuse App\\ECommerce\\Http\\Resources\\OrderResource;\nuse App\\ECommerce\\Http\\Requests\\StoreOrderRequest;\nuse App\\ECommerce\\Http\\Requests\\UpdateOrderRequest;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\Resources\\Json\\AnonymousResourceCollection;\nuse Illuminate\\Support\\Facades\\Log;\n\nclass OrderController extends Controller\n{\n    protected OrderService $service;\n\n    public function __construct(OrderService $service)\n    {\n        $this->service = $service;\n    }\n\n    /**\n     * Display a listing of the resource.\n     */\n    public function index(Request $request): AnonymousResourceCollection\n    {\n        try {\n            $perPage = $request->get('per_page', 15);\n            $entities = $this->service->getPaginated($perPage);\n            \n            return OrderResource::collection($entities);\n        } catch (\\Exception $e) {\n            Log::error('Error fetching orders: ' . $e->getMessage());\n            return response()->json(['error' => 'Internal server error'], 500);\n        }\n    }\n\n    /**\n     * Display the specified resource.\n     */\n    public function show(int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->findById($id);\n            \n            if (!$entity) {\n                return response()->json(['error' => 'Order not found'], 404);\n            }\n            \n            return response()->json(new OrderResource($entity));\n        } catch (\\Exception $e) {\n            Log::error('Error fetching order: ' . $e->getMessage());\n            return response()->json(['error' => 'Internal server error'], 500);\n        }\n    }\n\n    /**\n     * Store a newly created resource in storage.\n     */\n    public function store(StoreOrderRequest $request): JsonResponse\n    {\n        try {\n            $entity = $this->service->create($request->validated());\n            \n            return response()->json(new OrderResource($entity), 201);\n        } catch (\\Exception $e) {\n            Log::error('Error creating order: ' . $e->getMessage());\n            return response()->json(['error' => 'Bad request', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n    /**\n     * Update the specified resource in storage.\n     */\n    public function update(UpdateOrderRequest $request, int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->update($id, $request->validated());\n            \n            if (!$entity) {\n                return response()->json(['error' => 'Order not found'], 404);\n            }\n            \n            return response()->json(new OrderResource($entity));\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error updating order: ' . $e->getMessage());\n            return response()->json(['error' => 'Bad request', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n    /**\n     * Remove the specified resource from storage.\n     */\n    public function destroy(int $id): JsonResponse\n    {\n        try {\n            $deleted = $this->service->delete($id);\n            \n            if (!$deleted) {\n                return response()->json(['error' => 'Order not found'], 404);\n            }\n            \n            return response()->json(null, 204);\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error deleting order: ' . $e->getMessage());\n            return response()->json(['error' => 'Internal server error'], 500);\n        }\n    }\n\n    /**\n     * Suspend the specified order.\n     */\n    public function suspend(int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->suspendOrder($id);\n            \n            return response()->json(new OrderResource($entity));\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error suspending order: ' . $e->getMessage());\n            return response()->json(['error' => 'Invalid state transition', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n    /**\n     * Activate the specified order.\n     */\n    public function activate(int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->activateOrder($id);\n            \n            return response()->json(new OrderResource($entity));\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error activating order: ' . $e->getMessage());\n            return response()->json(['error' => 'Invalid state transition', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n}\n","Models/Order.php":"<?php\n\nnamespace App\\ECommerce\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Carbon\\Carbon;\nuse App\\ECommerce\\Enums\\OrderStatus;\n\nclass Order extends Model\n{\n    use HasFactory;\n\n    protected $table = 'orders';\n\n    protected $fillable = [\n        'productId',\n        'quantity',\n        'status',\n    ];\n\n    protected $casts = [\n        'id' => 'integer',\n        'productId' => 'integer',\n        'quantity' => 'integer',\n        'status' => OrderStatus::class,\n        'created_at' => 'datetime',\n        'updated_at' => 'datetime',\n    ];\n\n    public function suspend(): void\n    {\n        if ($this->status !== OrderStatus::ACTIVE) {\n            throw new \\InvalidArgumentException('Cannot suspend entity in state: ' . $this->status->value);\n        }\n        \n        $this->status = OrderStatus::SUSPENDED;\n        $this->updated_at = Carbon::now();\n        $this->save();\n    }\n\n    public function activate(): void\n    {\n        if ($this->status !== OrderStatus::SUSPENDED) {\n            throw new \\InvalidArgumentException('Cannot activate entity in state: ' . $this->status->value);\n        }\n        \n        $this->status = OrderStatus::ACTIVE;\n        $this->updated_at = Carbon::now();\n        $this->save();\n    }\n\n}\n","enums/OrderStatus.php":"<?php\n\nnamespace App\\ECommerce\\Enums;\n\nenum OrderStatus: string\n{\n    case DELIVERED = 'DELIVERED';\n    case CONFIRMED = 'CONFIRMED';\n    case INITIAL = 'INITIAL';\n    case PENDING = 'PENDING';\n    case SHIPPED = 'SHIPPED';\n\n    public function label(): string\n    {\n        return match($this) {\n            self::DELIVERED => 'Delivered',\n            self::CONFIRMED => 'Confirmed',\n            self::INITIAL => 'Initial',\n            self::PENDING => 'Pending',\n            self::SHIPPED => 'Shipped',\n        };\n    }\n}\n","Models/Product.php":"<?php\n\nnamespace App\\ECommerce\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Carbon\\Carbon;\nuse App\\ECommerce\\Enums\\ProductStatus;\n\nclass Product extends Model\n{\n    use HasFactory;\n\n    protected $table = 'products';\n\n    protected $fillable = [\n        'name',\n        'price',\n        'status',\n    ];\n\n    protected $casts = [\n        'id' => 'integer',\n        'price' => 'decimal:2',\n        'status' => ProductStatus::class,\n        'created_at' => 'datetime',\n        'updated_at' => 'datetime',\n    ];\n\n    public function suspend(): void\n    {\n        if ($this->status !== ProductStatus::ACTIVE) {\n            throw new \\InvalidArgumentException('Cannot suspend entity in state: ' . $this->status->value);\n        }\n        \n        $this->status = ProductStatus::SUSPENDED;\n        $this->updated_at = Carbon::now();\n        $this->save();\n    }\n\n    public function activate(): void\n    {\n        if ($this->status !== ProductStatus::SUSPENDED) {\n            throw new \\InvalidArgumentException('Cannot activate entity in state: ' . $this->status->value);\n        }\n        \n        $this->status = ProductStatus::ACTIVE;\n        $this->updated_at = Carbon::now();\n        $this->save();\n    }\n\n}\n","database/migrations/V001__Initial_Schema.sql":"<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nreturn new class extends Migration\n{\n    /**\n     * Run the migrations.\n     */\n    public function up(): void\n    {\n        Schema::create('products', function (Blueprint $table) {\n            $table->id();\n            $table->string('name');\n            $table->decimal('price')->nullable();\n            $table->string('status')->default('ACTIVE');\n            $table->timestamps();\n\n            // Indexes\n            $table->index('status');\n            $table->index('created_at');\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     */\n    public function down(): void\n    {\n        Schema::dropIfExists('products');\n    }\n};\n\n\n<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nreturn new class extends Migration\n{\n    /**\n     * Run the migrations.\n     */\n    public function up(): void\n    {\n        Schema::create('orders', function (Blueprint $table) {\n            $table->id();\n            $table->integer('productId')->nullable();\n            $table->integer('quantity')->nullable();\n            $table->string('status')->default('ACTIVE');\n            $table->timestamps();\n\n            // Indexes\n            $table->index('status');\n            $table->index('created_at');\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     */\n    public function down(): void\n    {\n        Schema::dropIfExists('orders');\n    }\n};\n\n\n<?php\n\nnamespace App\\ECommerce\\Providers;\n\nuse Illuminate\\Support\\ServiceProvider;\nuse App\\ECommerce\\Repositories\\ProductRepository;\nuse App\\ECommerce\\Repositories\\ProductRepositoryInterface;\nuse App\\ECommerce\\Repositories\\OrderRepository;\nuse App\\ECommerce\\Repositories\\OrderRepositoryInterface;\n\nclass AppServiceProvider extends ServiceProvider\n{\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        $this->app->bind(ProductRepositoryInterface::class, ProductRepository::class);\n        $this->app->bind(OrderRepositoryInterface::class, OrderRepository::class);\n    }\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        //\n    }\n}\n\n\n<?php\n\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Route;\nuse App\\ECommerce\\Http\\Controllers\\Api\\ProductController;\nuse App\\ECommerce\\Http\\Controllers\\Api\\OrderController;\n\n/*\n|--------------------------------------------------------------------------\n| API Routes\n|--------------------------------------------------------------------------\n|\n| Here is where you can register API routes for your application. These\n| routes are loaded by the RouteServiceProvider and all of them will\n| be assigned to the \"api\" middleware group. Make something great!\n|\n*/\n\nRoute::middleware('auth:sanctum')->get('/user', function (Request $request) {\n    return $request->user();\n});\n\n// Product routes\nRoute::apiResource('products', ProductController::class);\nRoute::patch('products/{id}/suspend', [ProductController::class, 'suspend']);\nRoute::patch('products/{id}/activate', [ProductController::class, 'activate']);\n\n// Order routes\nRoute::apiResource('orders', OrderController::class);\nRoute::patch('orders/{id}/suspend', [OrderController::class, 'suspend']);\nRoute::patch('orders/{id}/activate', [OrderController::class, 'activate']);\n\n","Repositories/OrderRepository.java":"<?php\n\nnamespace App\\ECommerce\\Repositories;\n\nuse App\\ECommerce\\Models\\Order;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Pagination\\LengthAwarePaginator;\n\ninterface OrderRepositoryInterface\n{\n    public function getAll(): Collection;\n    public function getPaginated(int $perPage = 15): LengthAwarePaginator;\n    public function findById(int $id): ?Order;\n    public function create(array $data): Order;\n    public function update(int $id, array $data): ?Order;\n    public function delete(int $id): bool;\n    public function exists(int $id): bool;\n}\n\n\n<?php\n\nnamespace App\\ECommerce\\Repositories;\n\nuse App\\ECommerce\\Models\\Order;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Pagination\\LengthAwarePaginator;\nuse Illuminate\\Support\\Facades\\Log;\n\nclass OrderRepository implements OrderRepositoryInterface\n{\n    protected Order $model;\n\n    public function __construct(Order $model)\n    {\n        $this->model = $model;\n    }\n\n    public function getAll(): Collection\n    {\n        return $this->model->all();\n    }\n\n    public function getPaginated(int $perPage = 15): LengthAwarePaginator\n    {\n        return $this->model->paginate($perPage);\n    }\n\n    public function findById(int $id): ?Order\n    {\n        return $this->model->find($id);\n    }\n\n    public function create(array $data): Order\n    {\n        try {\n            return $this->model->create($data);\n        } catch (\\Exception $e) {\n            Log::error('Error creating Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function update(int $id, array $data): ?Order\n    {\n        try {\n            $entity = $this->findById($id);\n            if ($entity) {\n                $entity->update($data);\n                return $entity->fresh();\n            }\n            return null;\n        } catch (\\Exception $e) {\n            Log::error('Error updating Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function delete(int $id): bool\n    {\n        try {\n            $entity = $this->findById($id);\n            if ($entity) {\n                return $entity->delete();\n            }\n            return false;\n        } catch (\\Exception $e) {\n            Log::error('Error deleting Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function exists(int $id): bool\n    {\n        return $this->model->where('id', $id)->exists();\n    }\n}\n","README.md":"# Generated Application\n\nThis application was generated from UML diagrams using the modular code generator.\n\n## Architecture\n\n- **Entities**: Domain models with state management\n- **Repositories**: Data access layer\n- **Services**: Business logic layer\n- **Controllers**: REST API endpoints\n\n## Generated Classes\n\n### Product\n- **Stateful entity** with state transitions\n\n### Order\n- **Stateful entity** with state transitions\n\n"},"packageName":null,"language":null,"generatedFiles":{"Services/ProductService.java":"<?php\n\nnamespace App\\ECommerce\\Services;\n\nuse App\\ECommerce\\Models\\Product;\nuse App\\ECommerce\\Repositories\\ProductRepositoryInterface;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Pagination\\LengthAwarePaginator;\nuse Illuminate\\Validation\\ValidationException;\nuse Illuminate\\Support\\Facades\\Validator;\nuse Illuminate\\Support\\Facades\\Log;\n\nuse App\\ECommerce\\Enums\\ProductStatus;\n\nclass ProductService\n{\n    protected ProductRepositoryInterface $repository;\n\n    public function __construct(ProductRepositoryInterface $repository)\n    {\n        $this->repository = $repository;\n    }\n\n    public function getAll(): Collection\n    {\n        return $this->repository->getAll();\n    }\n\n    public function getPaginated(int $perPage = 15): LengthAwarePaginator\n    {\n        return $this->repository->getPaginated($perPage);\n    }\n\n    public function findById(int $id): ?Product\n    {\n        return $this->repository->findById($id);\n    }\n\n    public function create(array $data): Product\n    {\n        $this->validateData($data);\n        \n        try {\n            return $this->repository->create($data);\n        } catch (\\Exception $e) {\n            Log::error('Service error creating Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function update(int $id, array $data): ?Product\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Product not found with id: ' . $id);\n        }\n        \n        $this->validateData($data, $id);\n        \n        try {\n            return $this->repository->update($id, $data);\n        } catch (\\Exception $e) {\n            Log::error('Service error updating Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function delete(int $id): bool\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Product not found with id: ' . $id);\n        }\n        \n        try {\n            return $this->repository->delete($id);\n        } catch (\\Exception $e) {\n            Log::error('Service error deleting Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function suspendProduct(int $id): ?Product\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Product not found with id: ' . $id);\n        }\n        \n        try {\n            $entity->suspend();\n            return $entity;\n        } catch (\\Exception $e) {\n            Log::error('Service error suspending Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function activateProduct(int $id): ?Product\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Product not found with id: ' . $id);\n        }\n        \n        try {\n            $entity->activate();\n            return $entity;\n        } catch (\\Exception $e) {\n            Log::error('Service error activating Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    protected function validateData(array $data, ?int $id = null): void\n    {\n        $rules = [\n            // Add validation rules here\n            // 'name' => 'required|string|max:255',\n            // 'email' => 'required|email|unique:products,email' . ($id ? ',' . $id : ''),\n        ];\n        \n        $validator = Validator::make($data, $rules);\n        \n        if ($validator->fails()) {\n            throw new ValidationException($validator);\n        }\n    }\n}\n","Services/OrderService.java":"<?php\n\nnamespace App\\ECommerce\\Services;\n\nuse App\\ECommerce\\Models\\Order;\nuse App\\ECommerce\\Repositories\\OrderRepositoryInterface;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Pagination\\LengthAwarePaginator;\nuse Illuminate\\Validation\\ValidationException;\nuse Illuminate\\Support\\Facades\\Validator;\nuse Illuminate\\Support\\Facades\\Log;\n\nuse App\\ECommerce\\Enums\\OrderStatus;\n\nclass OrderService\n{\n    protected OrderRepositoryInterface $repository;\n\n    public function __construct(OrderRepositoryInterface $repository)\n    {\n        $this->repository = $repository;\n    }\n\n    public function getAll(): Collection\n    {\n        return $this->repository->getAll();\n    }\n\n    public function getPaginated(int $perPage = 15): LengthAwarePaginator\n    {\n        return $this->repository->getPaginated($perPage);\n    }\n\n    public function findById(int $id): ?Order\n    {\n        return $this->repository->findById($id);\n    }\n\n    public function create(array $data): Order\n    {\n        $this->validateData($data);\n        \n        try {\n            return $this->repository->create($data);\n        } catch (\\Exception $e) {\n            Log::error('Service error creating Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function update(int $id, array $data): ?Order\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Order not found with id: ' . $id);\n        }\n        \n        $this->validateData($data, $id);\n        \n        try {\n            return $this->repository->update($id, $data);\n        } catch (\\Exception $e) {\n            Log::error('Service error updating Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function delete(int $id): bool\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Order not found with id: ' . $id);\n        }\n        \n        try {\n            return $this->repository->delete($id);\n        } catch (\\Exception $e) {\n            Log::error('Service error deleting Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function suspendOrder(int $id): ?Order\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Order not found with id: ' . $id);\n        }\n        \n        try {\n            $entity->suspend();\n            return $entity;\n        } catch (\\Exception $e) {\n            Log::error('Service error suspending Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function activateOrder(int $id): ?Order\n    {\n        $entity = $this->repository->findById($id);\n        if (!$entity) {\n            throw new \\InvalidArgumentException('Order not found with id: ' . $id);\n        }\n        \n        try {\n            $entity->activate();\n            return $entity;\n        } catch (\\Exception $e) {\n            Log::error('Service error activating Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    protected function validateData(array $data, ?int $id = null): void\n    {\n        $rules = [\n            // Add validation rules here\n            // 'name' => 'required|string|max:255',\n            // 'email' => 'required|email|unique:orders,email' . ($id ? ',' . $id : ''),\n        ];\n        \n        $validator = Validator::make($data, $rules);\n        \n        if ($validator->fails()) {\n            throw new ValidationException($validator);\n        }\n    }\n}\n","Http/Controllers/Api/ProductController.java":"<?php\n\nnamespace App\\ECommerce\\Http\\Controllers\\Api;\n\nuse App\\ECommerce\\Http\\Controllers\\Controller;\nuse App\\ECommerce\\Models\\Product;\nuse App\\ECommerce\\Services\\ProductService;\nuse App\\ECommerce\\Http\\Resources\\ProductResource;\nuse App\\ECommerce\\Http\\Requests\\StoreProductRequest;\nuse App\\ECommerce\\Http\\Requests\\UpdateProductRequest;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\Resources\\Json\\AnonymousResourceCollection;\nuse Illuminate\\Support\\Facades\\Log;\n\nclass ProductController extends Controller\n{\n    protected ProductService $service;\n\n    public function __construct(ProductService $service)\n    {\n        $this->service = $service;\n    }\n\n    /**\n     * Display a listing of the resource.\n     */\n    public function index(Request $request): AnonymousResourceCollection\n    {\n        try {\n            $perPage = $request->get('per_page', 15);\n            $entities = $this->service->getPaginated($perPage);\n            \n            return ProductResource::collection($entities);\n        } catch (\\Exception $e) {\n            Log::error('Error fetching products: ' . $e->getMessage());\n            return response()->json(['error' => 'Internal server error'], 500);\n        }\n    }\n\n    /**\n     * Display the specified resource.\n     */\n    public function show(int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->findById($id);\n            \n            if (!$entity) {\n                return response()->json(['error' => 'Product not found'], 404);\n            }\n            \n            return response()->json(new ProductResource($entity));\n        } catch (\\Exception $e) {\n            Log::error('Error fetching product: ' . $e->getMessage());\n            return response()->json(['error' => 'Internal server error'], 500);\n        }\n    }\n\n    /**\n     * Store a newly created resource in storage.\n     */\n    public function store(StoreProductRequest $request): JsonResponse\n    {\n        try {\n            $entity = $this->service->create($request->validated());\n            \n            return response()->json(new ProductResource($entity), 201);\n        } catch (\\Exception $e) {\n            Log::error('Error creating product: ' . $e->getMessage());\n            return response()->json(['error' => 'Bad request', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n    /**\n     * Update the specified resource in storage.\n     */\n    public function update(UpdateProductRequest $request, int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->update($id, $request->validated());\n            \n            if (!$entity) {\n                return response()->json(['error' => 'Product not found'], 404);\n            }\n            \n            return response()->json(new ProductResource($entity));\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error updating product: ' . $e->getMessage());\n            return response()->json(['error' => 'Bad request', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n    /**\n     * Remove the specified resource from storage.\n     */\n    public function destroy(int $id): JsonResponse\n    {\n        try {\n            $deleted = $this->service->delete($id);\n            \n            if (!$deleted) {\n                return response()->json(['error' => 'Product not found'], 404);\n            }\n            \n            return response()->json(null, 204);\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error deleting product: ' . $e->getMessage());\n            return response()->json(['error' => 'Internal server error'], 500);\n        }\n    }\n\n    /**\n     * Suspend the specified product.\n     */\n    public function suspend(int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->suspendProduct($id);\n            \n            return response()->json(new ProductResource($entity));\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error suspending product: ' . $e->getMessage());\n            return response()->json(['error' => 'Invalid state transition', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n    /**\n     * Activate the specified product.\n     */\n    public function activate(int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->activateProduct($id);\n            \n            return response()->json(new ProductResource($entity));\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error activating product: ' . $e->getMessage());\n            return response()->json(['error' => 'Invalid state transition', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n}\n","Repositories/ProductRepository.java":"<?php\n\nnamespace App\\ECommerce\\Repositories;\n\nuse App\\ECommerce\\Models\\Product;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Pagination\\LengthAwarePaginator;\n\ninterface ProductRepositoryInterface\n{\n    public function getAll(): Collection;\n    public function getPaginated(int $perPage = 15): LengthAwarePaginator;\n    public function findById(int $id): ?Product;\n    public function create(array $data): Product;\n    public function update(int $id, array $data): ?Product;\n    public function delete(int $id): bool;\n    public function exists(int $id): bool;\n}\n\n\n<?php\n\nnamespace App\\ECommerce\\Repositories;\n\nuse App\\ECommerce\\Models\\Product;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Pagination\\LengthAwarePaginator;\nuse Illuminate\\Support\\Facades\\Log;\n\nclass ProductRepository implements ProductRepositoryInterface\n{\n    protected Product $model;\n\n    public function __construct(Product $model)\n    {\n        $this->model = $model;\n    }\n\n    public function getAll(): Collection\n    {\n        return $this->model->all();\n    }\n\n    public function getPaginated(int $perPage = 15): LengthAwarePaginator\n    {\n        return $this->model->paginate($perPage);\n    }\n\n    public function findById(int $id): ?Product\n    {\n        return $this->model->find($id);\n    }\n\n    public function create(array $data): Product\n    {\n        try {\n            return $this->model->create($data);\n        } catch (\\Exception $e) {\n            Log::error('Error creating Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function update(int $id, array $data): ?Product\n    {\n        try {\n            $entity = $this->findById($id);\n            if ($entity) {\n                $entity->update($data);\n                return $entity->fresh();\n            }\n            return null;\n        } catch (\\Exception $e) {\n            Log::error('Error updating Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function delete(int $id): bool\n    {\n        try {\n            $entity = $this->findById($id);\n            if ($entity) {\n                return $entity->delete();\n            }\n            return false;\n        } catch (\\Exception $e) {\n            Log::error('Error deleting Product: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function exists(int $id): bool\n    {\n        return $this->model->where('id', $id)->exists();\n    }\n}\n","enums/ProductStatus.php":"<?php\n\nnamespace App\\ECommerce\\Enums;\n\nenum ProductStatus: string\n{\n    case DELIVERED = 'DELIVERED';\n    case CONFIRMED = 'CONFIRMED';\n    case INITIAL = 'INITIAL';\n    case PENDING = 'PENDING';\n    case SHIPPED = 'SHIPPED';\n\n    public function label(): string\n    {\n        return match($this) {\n            self::DELIVERED => 'Delivered',\n            self::CONFIRMED => 'Confirmed',\n            self::INITIAL => 'Initial',\n            self::PENDING => 'Pending',\n            self::SHIPPED => 'Shipped',\n        };\n    }\n}\n","Http/Controllers/Api/OrderController.java":"<?php\n\nnamespace App\\ECommerce\\Http\\Controllers\\Api;\n\nuse App\\ECommerce\\Http\\Controllers\\Controller;\nuse App\\ECommerce\\Models\\Order;\nuse App\\ECommerce\\Services\\OrderService;\nuse App\\ECommerce\\Http\\Resources\\OrderResource;\nuse App\\ECommerce\\Http\\Requests\\StoreOrderRequest;\nuse App\\ECommerce\\Http\\Requests\\UpdateOrderRequest;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\Resources\\Json\\AnonymousResourceCollection;\nuse Illuminate\\Support\\Facades\\Log;\n\nclass OrderController extends Controller\n{\n    protected OrderService $service;\n\n    public function __construct(OrderService $service)\n    {\n        $this->service = $service;\n    }\n\n    /**\n     * Display a listing of the resource.\n     */\n    public function index(Request $request): AnonymousResourceCollection\n    {\n        try {\n            $perPage = $request->get('per_page', 15);\n            $entities = $this->service->getPaginated($perPage);\n            \n            return OrderResource::collection($entities);\n        } catch (\\Exception $e) {\n            Log::error('Error fetching orders: ' . $e->getMessage());\n            return response()->json(['error' => 'Internal server error'], 500);\n        }\n    }\n\n    /**\n     * Display the specified resource.\n     */\n    public function show(int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->findById($id);\n            \n            if (!$entity) {\n                return response()->json(['error' => 'Order not found'], 404);\n            }\n            \n            return response()->json(new OrderResource($entity));\n        } catch (\\Exception $e) {\n            Log::error('Error fetching order: ' . $e->getMessage());\n            return response()->json(['error' => 'Internal server error'], 500);\n        }\n    }\n\n    /**\n     * Store a newly created resource in storage.\n     */\n    public function store(StoreOrderRequest $request): JsonResponse\n    {\n        try {\n            $entity = $this->service->create($request->validated());\n            \n            return response()->json(new OrderResource($entity), 201);\n        } catch (\\Exception $e) {\n            Log::error('Error creating order: ' . $e->getMessage());\n            return response()->json(['error' => 'Bad request', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n    /**\n     * Update the specified resource in storage.\n     */\n    public function update(UpdateOrderRequest $request, int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->update($id, $request->validated());\n            \n            if (!$entity) {\n                return response()->json(['error' => 'Order not found'], 404);\n            }\n            \n            return response()->json(new OrderResource($entity));\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error updating order: ' . $e->getMessage());\n            return response()->json(['error' => 'Bad request', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n    /**\n     * Remove the specified resource from storage.\n     */\n    public function destroy(int $id): JsonResponse\n    {\n        try {\n            $deleted = $this->service->delete($id);\n            \n            if (!$deleted) {\n                return response()->json(['error' => 'Order not found'], 404);\n            }\n            \n            return response()->json(null, 204);\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error deleting order: ' . $e->getMessage());\n            return response()->json(['error' => 'Internal server error'], 500);\n        }\n    }\n\n    /**\n     * Suspend the specified order.\n     */\n    public function suspend(int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->suspendOrder($id);\n            \n            return response()->json(new OrderResource($entity));\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error suspending order: ' . $e->getMessage());\n            return response()->json(['error' => 'Invalid state transition', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n    /**\n     * Activate the specified order.\n     */\n    public function activate(int $id): JsonResponse\n    {\n        try {\n            $entity = $this->service->activateOrder($id);\n            \n            return response()->json(new OrderResource($entity));\n        } catch (\\InvalidArgumentException $e) {\n            return response()->json(['error' => 'Entity not found', 'message' => $e->getMessage()], 404);\n        } catch (\\Exception $e) {\n            Log::error('Error activating order: ' . $e->getMessage());\n            return response()->json(['error' => 'Invalid state transition', 'message' => $e->getMessage()], 400);\n        }\n    }\n\n}\n","Models/Order.php":"<?php\n\nnamespace App\\ECommerce\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Carbon\\Carbon;\nuse App\\ECommerce\\Enums\\OrderStatus;\n\nclass Order extends Model\n{\n    use HasFactory;\n\n    protected $table = 'orders';\n\n    protected $fillable = [\n        'productId',\n        'quantity',\n        'status',\n    ];\n\n    protected $casts = [\n        'id' => 'integer',\n        'productId' => 'integer',\n        'quantity' => 'integer',\n        'status' => OrderStatus::class,\n        'created_at' => 'datetime',\n        'updated_at' => 'datetime',\n    ];\n\n    public function suspend(): void\n    {\n        if ($this->status !== OrderStatus::ACTIVE) {\n            throw new \\InvalidArgumentException('Cannot suspend entity in state: ' . $this->status->value);\n        }\n        \n        $this->status = OrderStatus::SUSPENDED;\n        $this->updated_at = Carbon::now();\n        $this->save();\n    }\n\n    public function activate(): void\n    {\n        if ($this->status !== OrderStatus::SUSPENDED) {\n            throw new \\InvalidArgumentException('Cannot activate entity in state: ' . $this->status->value);\n        }\n        \n        $this->status = OrderStatus::ACTIVE;\n        $this->updated_at = Carbon::now();\n        $this->save();\n    }\n\n}\n","enums/OrderStatus.php":"<?php\n\nnamespace App\\ECommerce\\Enums;\n\nenum OrderStatus: string\n{\n    case DELIVERED = 'DELIVERED';\n    case CONFIRMED = 'CONFIRMED';\n    case INITIAL = 'INITIAL';\n    case PENDING = 'PENDING';\n    case SHIPPED = 'SHIPPED';\n\n    public function label(): string\n    {\n        return match($this) {\n            self::DELIVERED => 'Delivered',\n            self::CONFIRMED => 'Confirmed',\n            self::INITIAL => 'Initial',\n            self::PENDING => 'Pending',\n            self::SHIPPED => 'Shipped',\n        };\n    }\n}\n","Models/Product.php":"<?php\n\nnamespace App\\ECommerce\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Carbon\\Carbon;\nuse App\\ECommerce\\Enums\\ProductStatus;\n\nclass Product extends Model\n{\n    use HasFactory;\n\n    protected $table = 'products';\n\n    protected $fillable = [\n        'name',\n        'price',\n        'status',\n    ];\n\n    protected $casts = [\n        'id' => 'integer',\n        'price' => 'decimal:2',\n        'status' => ProductStatus::class,\n        'created_at' => 'datetime',\n        'updated_at' => 'datetime',\n    ];\n\n    public function suspend(): void\n    {\n        if ($this->status !== ProductStatus::ACTIVE) {\n            throw new \\InvalidArgumentException('Cannot suspend entity in state: ' . $this->status->value);\n        }\n        \n        $this->status = ProductStatus::SUSPENDED;\n        $this->updated_at = Carbon::now();\n        $this->save();\n    }\n\n    public function activate(): void\n    {\n        if ($this->status !== ProductStatus::SUSPENDED) {\n            throw new \\InvalidArgumentException('Cannot activate entity in state: ' . $this->status->value);\n        }\n        \n        $this->status = ProductStatus::ACTIVE;\n        $this->updated_at = Carbon::now();\n        $this->save();\n    }\n\n}\n","database/migrations/V001__Initial_Schema.sql":"<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nreturn new class extends Migration\n{\n    /**\n     * Run the migrations.\n     */\n    public function up(): void\n    {\n        Schema::create('products', function (Blueprint $table) {\n            $table->id();\n            $table->string('name');\n            $table->decimal('price')->nullable();\n            $table->string('status')->default('ACTIVE');\n            $table->timestamps();\n\n            // Indexes\n            $table->index('status');\n            $table->index('created_at');\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     */\n    public function down(): void\n    {\n        Schema::dropIfExists('products');\n    }\n};\n\n\n<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nreturn new class extends Migration\n{\n    /**\n     * Run the migrations.\n     */\n    public function up(): void\n    {\n        Schema::create('orders', function (Blueprint $table) {\n            $table->id();\n            $table->integer('productId')->nullable();\n            $table->integer('quantity')->nullable();\n            $table->string('status')->default('ACTIVE');\n            $table->timestamps();\n\n            // Indexes\n            $table->index('status');\n            $table->index('created_at');\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     */\n    public function down(): void\n    {\n        Schema::dropIfExists('orders');\n    }\n};\n\n\n<?php\n\nnamespace App\\ECommerce\\Providers;\n\nuse Illuminate\\Support\\ServiceProvider;\nuse App\\ECommerce\\Repositories\\ProductRepository;\nuse App\\ECommerce\\Repositories\\ProductRepositoryInterface;\nuse App\\ECommerce\\Repositories\\OrderRepository;\nuse App\\ECommerce\\Repositories\\OrderRepositoryInterface;\n\nclass AppServiceProvider extends ServiceProvider\n{\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        $this->app->bind(ProductRepositoryInterface::class, ProductRepository::class);\n        $this->app->bind(OrderRepositoryInterface::class, OrderRepository::class);\n    }\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        //\n    }\n}\n\n\n<?php\n\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Route;\nuse App\\ECommerce\\Http\\Controllers\\Api\\ProductController;\nuse App\\ECommerce\\Http\\Controllers\\Api\\OrderController;\n\n/*\n|--------------------------------------------------------------------------\n| API Routes\n|--------------------------------------------------------------------------\n|\n| Here is where you can register API routes for your application. These\n| routes are loaded by the RouteServiceProvider and all of them will\n| be assigned to the \"api\" middleware group. Make something great!\n|\n*/\n\nRoute::middleware('auth:sanctum')->get('/user', function (Request $request) {\n    return $request->user();\n});\n\n// Product routes\nRoute::apiResource('products', ProductController::class);\nRoute::patch('products/{id}/suspend', [ProductController::class, 'suspend']);\nRoute::patch('products/{id}/activate', [ProductController::class, 'activate']);\n\n// Order routes\nRoute::apiResource('orders', OrderController::class);\nRoute::patch('orders/{id}/suspend', [OrderController::class, 'suspend']);\nRoute::patch('orders/{id}/activate', [OrderController::class, 'activate']);\n\n","Repositories/OrderRepository.java":"<?php\n\nnamespace App\\ECommerce\\Repositories;\n\nuse App\\ECommerce\\Models\\Order;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Pagination\\LengthAwarePaginator;\n\ninterface OrderRepositoryInterface\n{\n    public function getAll(): Collection;\n    public function getPaginated(int $perPage = 15): LengthAwarePaginator;\n    public function findById(int $id): ?Order;\n    public function create(array $data): Order;\n    public function update(int $id, array $data): ?Order;\n    public function delete(int $id): bool;\n    public function exists(int $id): bool;\n}\n\n\n<?php\n\nnamespace App\\ECommerce\\Repositories;\n\nuse App\\ECommerce\\Models\\Order;\nuse Illuminate\\Database\\Eloquent\\Collection;\nuse Illuminate\\Pagination\\LengthAwarePaginator;\nuse Illuminate\\Support\\Facades\\Log;\n\nclass OrderRepository implements OrderRepositoryInterface\n{\n    protected Order $model;\n\n    public function __construct(Order $model)\n    {\n        $this->model = $model;\n    }\n\n    public function getAll(): Collection\n    {\n        return $this->model->all();\n    }\n\n    public function getPaginated(int $perPage = 15): LengthAwarePaginator\n    {\n        return $this->model->paginate($perPage);\n    }\n\n    public function findById(int $id): ?Order\n    {\n        return $this->model->find($id);\n    }\n\n    public function create(array $data): Order\n    {\n        try {\n            return $this->model->create($data);\n        } catch (\\Exception $e) {\n            Log::error('Error creating Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function update(int $id, array $data): ?Order\n    {\n        try {\n            $entity = $this->findById($id);\n            if ($entity) {\n                $entity->update($data);\n                return $entity->fresh();\n            }\n            return null;\n        } catch (\\Exception $e) {\n            Log::error('Error updating Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function delete(int $id): bool\n    {\n        try {\n            $entity = $this->findById($id);\n            if ($entity) {\n                return $entity->delete();\n            }\n            return false;\n        } catch (\\Exception $e) {\n            Log::error('Error deleting Order: ' . $e->getMessage());\n            throw $e;\n        }\n    }\n\n    public function exists(int $id): bool\n    {\n        return $this->model->where('id', $id)->exists();\n    }\n}\n","README.md":"# Generated Application\n\nThis application was generated from UML diagrams using the modular code generator.\n\n## Architecture\n\n- **Entities**: Domain models with state management\n- **Repositories**: Data access layer\n- **Services**: Business logic layer\n- **Controllers**: REST API endpoints\n\n## Generated Classes\n\n### Product\n- **Stateful entity** with state transitions\n\n### Order\n- **Stateful entity** with state transitions\n\n"}}